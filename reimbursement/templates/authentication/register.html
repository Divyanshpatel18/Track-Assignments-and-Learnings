
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Registration</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="/static/css/register.css">
</head>
<body>
    
    <header>
        <nav class="navbar">
            <div class="container d-flex justify-content-center align-items-center">
                <a class="navbar-brand" href="#"><img src="/static/images/download.jpg" alt="" height="50 " width="50"></a>
                <span class="navbar-text" id="portal-text">REIMBURSEMENT PORTAL</span>
            </div>
        </nav>
    </header>
    <div class="container-fluid myContainer">
        <div class="row justify-content-center topOfRegisterBox ">
            <div class="col-md-6 mt-2 registerBox">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title text-center">Create New Account</h2>
                    </div>
                    <div class="card-body">
                        <form id="registerForm" method="POST" action="/register" onsubmit="return validateForm()" enctype="multipart/form-data">
                            <div class="mb-3">
                                <label for="full_name" class="form-label">Full Name:</label>
                                <div class="input-group">
                                <span class="input-group-text"><i class="fas fa-user"></i></span>
                                <input type="text" id="full_name" name="full_name" class="form-control" placeholder="Username"  required>
                                </div>
                            </div>
                            
                            <div class="mb-3">
                                <label for="email" class="form-label">Email:</label>
                                <div class="input-group">
                                    <span class="input-group-text"><i class="fas fa-envelope"></i></span>
                                    <input type="email" id="email" name="email" class="form-control" placeholder="Email" required>
                                </div>
                            </div>
                            
                            <div class="mb-3">
                                <label for="password" class="form-label">Password:</label>
                                <div class="input-group">
                                   <span class="input-group-text"><i class="fas fa-lock"></i></span>
                                   <input type="password" id="password" name="password" class="form-control" placeholder="Password"  required>
                                </div>
                            </div>

                            <div class="mb-3">
                                <label for="confirm_password" class="form-label">Confirm Password:</label>
                                <div class="input-group">
                                    <span class="input-group-text"><i class="fas fa-lock"></i></span>
                                    <input type="password" id="confirm_password" name="confirm_password" class="form-control" placeholder="Re-enter Password" required>
                               </div>
                            </div>
                            
                            <div class="mb-3">
                                <label for="department" class="form-label">Choose Department:</label>
                                <div class="input-group">
                                    <span class="input-group-text"><i class="fas fa-building"></i></span>
                                    <select id="department" name="department" class="form-select" required>
                                        <option value="" disabled selected>Choose your Department</option>
                                        <!-- Populate dropdown options from database -->
                                        {% for department in departments %}
                                            <option value="{{ department.dept_id }}">{{ department.dept_name }}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label for="user_image"  >Upload your Image:</label>
                                <div class="input-group">
                                <span class="input-group-text"><i class="fas fa-user"></i></span>
                                <input type="file" id="user_image" name="user_image" accept="image/*" required>
                                </div>
                            </div>
                            <div class="d-grid gap-2 justify-content-center">
                                <button type="submit" class="btn btn-primary myButton">Register</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

</body>
<script>
   function validateForm() {
        var email = document.getElementById("email").value.trim();
        var password = document.getElementById("password").value;
        var confirmPassword = document.getElementById("confirm_password").value;
        var emailPattern = /^[a-z0-9._%+-]+@nucleusteq\.com$/;
        // check if passwords matchs
        if (password !== confirmPassword) {
            alert("Passwords do not match");
            return false;
        }
        // checks if email matches the required pattern
        // .test() method is a built-in method for regular expressions (regex) in JavaScript
        if (!emailPattern.test(email)) {
            alert("Please enter a valid email ending with @nucleusteq.com and ensure it's all lowercase.");
            return false;
        }

        return true;
    }
</script>
</body>
</html>
